---
- name: Add repository for python
  apt_repository:
    repo: ppa:deadsnakes/ppa
    filename: python3

- name: Installs dependencies for python
  package:
    name: software-properties-common
    state: present

- name: Installs latest python version
  package:
    name: "{{ python_version }}"
    state: present

- name: Running some check commands...
  shell: ls /usr/bin/{{ python_version }} # noqa 305
  register: python_check
  changed_when: false

- name: Check correct python version
  assert:
    that: "{{ python_version }} in python_check.stdout"
    success_msg: "{{ python_version }} successfully installed."
    fail_msg: "{{ python_version }} not found in /usr/bin folder."

- name: Printing Python version...
  debug:
    var: python_check.stdout
